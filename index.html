
    <style>
        #grafico-principal {
            width: 100%;
            height: 1600px;
        }

        #resultado-trump-harris {
            background-color: #fafafa;
            width: 100%;
            height: 10%;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
        }

        #mapa-compromisarios {
            width: 100%;
            height: 50%;
            background-color: #fafafa;
            overflow: hidden;
            padding: 50px 0 50px 0;
        }

        #mapas-comparativos {
            width: 100%;
            height: 28%;
            display: flex;
            flex-direction: row;
            justify-content: center;
        }

        #resultado-voto-popular {
            height: 13%;
            width: 100%;
            background-color: #fafafa;
            margin: 50px;
        }

        .mapa {
            width: 100%;
            height: 100%;
        }

        .mapa-secundario {
            height: auto;
            min-height: 50px;
            width: 30%;
            overflow: visible;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 10px;
            background-color: #fafafa;
        }


        .mapa-secundario select {
            width: auto;
            text-align: center;
            margin: 0 auto;
        }

        #divisoria-secundarios {
            margin: 0 1% 0 1%;
        }
    </style>
    <div id="grafico-principal">
        <div id="resultado-trump-harris">
            <object class="mapa" id="resultado-oficial-svg" type="image/svg+xml"
                data="https://file.epdata.es/biblioteca/19/resultado-oficial.svg"></object>
        </div>
    </div>
    <script>
        async function actualizarGrafico() {
    try {
        const [metadatos, datos] = await Promise.all([
            fetch('metadatos.json').then(response => response.json()),
            fetch('https://static01-europapress-net.s3.eu-west-1.amazonaws.com/imagenes/estaticos/deportes/olimpiadas/medallero2024.json').then(response => response.json())
        ]);

        // Actualización del gráfico de barras de electores
        const svgObject = document.getElementById('resultado-oficial-svg');
        svgObject.addEventListener('load', function () {
            const svgDoc = svgObject.contentDocument;
            if (svgDoc) {
                const votosTrump = parseInt(datos['total-electores'].Trump['resultado-2024']);
                const votosHarris = parseInt(datos['total-electores'].Harris['resultado-2024']);
                const totalVotos = 538;

                const longitudMaxima = 5060;
                const proporcionTrump = (votosTrump / totalVotos) * longitudMaxima;
                const proporcionHarris = (votosHarris / totalVotos) * longitudMaxima;

                svgDoc.querySelector('#barra-2').setAttribute('width', proporcionHarris.toString());
                svgDoc.querySelector('#barra').setAttribute('width', proporcionTrump.toString());
                svgDoc.querySelector('#barra').setAttribute('x', (5294 - proporcionTrump).toString());

                svgDoc.querySelector('#resultado-2024-trump').textContent = votosTrump;
                svgDoc.querySelector('#resultado-2024-harris').textContent = votosHarris;

                const variacionTrump = datos['total-electores'].Trump['variacion-24-20'];
                const variacionHarris = datos['total-electores'].Harris['variacion-24-20'];

                svgDoc.querySelector('#variacion-24-20-trump').textContent =
                    (parseInt(variacionTrump) > 0 ? variacionTrump + '\u25B2+' : '\u25BC');
                svgDoc.querySelector('#variacion-24-20-harris').textContent =
                    (parseInt(variacionHarris) > 0 ? '\u25B2+' : '\u25BC') + variacionHarris;

                const votosSinAsignar = totalVotos - votosTrump - votosHarris;
                const textoVotos = votosSinAsignar === 0
                    ? `${totalVotos} VOTOS EN TOTAL`
                    : `${totalVotos} VOTOS (${votosSinAsignar} SIN ASIGNAR)`;

                const etiquetaVotos = svgDoc.querySelector(".cls-8");
                etiquetaVotos.textContent = textoVotos;

                const currentX = parseFloat(etiquetaVotos.getAttribute("x")) || 0;
                etiquetaVotos.setAttribute("x", currentX + 310);
            }
        });
    } catch (error) {
        console.error('Error al cargar los JSON o el SVG:', error);
    }
}

document.addEventListener("DOMContentLoaded", () => {
    actualizarGrafico();
});

        
    </script>